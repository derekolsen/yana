<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <title>Yana</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
  <link href="data:image/x-icon;base64,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
  Q12lboCDQ2CkSNnrHu/u6uzt3zOt/n4AV0RynC8KOSYAAA+LaVRYdFhNTDpjb20uYWRvYmUueG1w
  AAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/
  Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0
  LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkv
  MDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAg
  ICB4bWxuczppcHRjRXh0PSJodHRwOi8vaXB0Yy5vcmcvc3RkL0lwdGM0eG1wRXh0LzIwMDgtMDIt
  MjkvIgogICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAg
  ICB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNl
  RXZlbnQjIgogICAgeG1sbnM6cGx1cz0iaHR0cDovL25zLnVzZXBsdXMub3JnL2xkZi94bXAvMS4w
  LyIKICAgIHhtbG5zOkdJTVA9Imh0dHA6Ly93d3cuZ2ltcC5vcmcveG1wLyIKICAgIHhtbG5zOmRj
  PSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgIHhtbG5zOnRpZmY9Imh0dHA6
  Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUu
  Y29tL3hhcC8xLjAvIgogICB4bXBNTTpEb2N1bWVudElEPSJnaW1wOmRvY2lkOmdpbXA6M2UwYmRk
  YzMtODM4MC00YmUzLWFlZTktZWM2ZWM1YWMzY2ViIgogICB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAu
  aWlkOjg2OWVlYjkyLTVmMjItNGNkOC04NmYxLTE2ZDQ3ODYwOTllOSIKICAgeG1wTU06T3JpZ2lu
  YWxEb2N1bWVudElEPSJ4bXAuZGlkOjEwODhjODc5LTJhNDUtNDU4NC05NDQ2LTBhZjEwNTdlNDUy
  ZSIKICAgR0lNUDpBUEk9IjIuMCIKICAgR0lNUDpQbGF0Zm9ybT0iTGludXgiCiAgIEdJTVA6VGlt
  ZVN0YW1wPSIxNjQ5NzQxMjMwOTA4MjA3IgogICBHSU1QOlZlcnNpb249IjIuMTAuMjIiCiAgIGRj
  OkZvcm1hdD0iaW1hZ2UvcG5nIgogICB0aWZmOk9yaWVudGF0aW9uPSIxIgogICB4bXA6Q3JlYXRv
  clRvb2w9IkdJTVAgMi4xMCI+CiAgIDxpcHRjRXh0OkxvY2F0aW9uQ3JlYXRlZD4KICAgIDxyZGY6
  QmFnLz4KICAgPC9pcHRjRXh0OkxvY2F0aW9uQ3JlYXRlZD4KICAgPGlwdGNFeHQ6TG9jYXRpb25T
  aG93bj4KICAgIDxyZGY6QmFnLz4KICAgPC9pcHRjRXh0OkxvY2F0aW9uU2hvd24+CiAgIDxpcHRj
  RXh0OkFydHdvcmtPck9iamVjdD4KICAgIDxyZGY6QmFnLz4KICAgPC9pcHRjRXh0OkFydHdvcmtP
  ck9iamVjdD4KICAgPGlwdGNFeHQ6UmVnaXN0cnlJZD4KICAgIDxyZGY6QmFnLz4KICAgPC9pcHRj
  RXh0OlJlZ2lzdHJ5SWQ+CiAgIDx4bXBNTTpIaXN0b3J5PgogICAgPHJkZjpTZXE+CiAgICAgPHJk
  ZjpsaQogICAgICBzdEV2dDphY3Rpb249InNhdmVkIgogICAgICBzdEV2dDpjaGFuZ2VkPSIvIgog
  ICAgICBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjFlMmZlMGRmLWM1NzQtNDFjYi1hOTQ5LWEy
  M2QyYmZiMzUyMyIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChMaW51eCki
  CiAgICAgIHN0RXZ0OndoZW49Ii0wNDowMCIvPgogICAgPC9yZGY6U2VxPgogICA8L3htcE1NOkhp
  c3Rvcnk+CiAgIDxwbHVzOkltYWdlU3VwcGxpZXI+CiAgICA8cmRmOlNlcS8+CiAgIDwvcGx1czpJ
  bWFnZVN1cHBsaWVyPgogICA8cGx1czpJbWFnZUNyZWF0b3I+CiAgICA8cmRmOlNlcS8+CiAgIDwv
  cGx1czpJbWFnZUNyZWF0b3I+CiAgIDxwbHVzOkNvcHlyaWdodE93bmVyPgogICAgPHJkZjpTZXEv
  PgogICA8L3BsdXM6Q29weXJpZ2h0T3duZXI+CiAgIDxwbHVzOkxpY2Vuc29yPgogICAgPHJkZjpT
  ZXEvPgogICA8L3BsdXM6TGljZW5zb3I+CiAgPC9yZGY6RGVzY3JpcHRpb24+CiA8L3JkZjpSREY+
  CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAg
  ICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz56UqrAAAABwlBMVEUAAN9oaGhbW1s1NTUoKCgj
  IyNQUFAxMTFJSUlTU1NUVFQwMDBSUlJRUVFJTFAmNk1BR08nN08nN05ESU83NzcuLi5GRkYnOFKC
  jZ4YL1KCjZwYMFMaMFMoOVJOTk5ISEgbLUb39/cVLE8WLE8WK08cLkalpaWvr69NTU0nJyc0RWCI
  kqQ1S26Ik6Q2TW02TW82TXA5SmN3d3fCwsJLS0sUFBSut8Q0SmxpdIUySGpseIlxfY41S214hJQ4
  T3GrtcAVFRW5ublKSkqpqamtra2xsbG2tra7u7vAwMDDw8Pu7u4XFxeUlJShoaGurq6ysrK6urq9
  vb3BwcHExMTJycns7OwWFhZfX18AAADNzc1EREQTExP29va0tLS3t7e+vr7Hx8fKysrPz8/T09Pq
  6upDQ0O4uLjX19egoKBBQUESEhK8vLzIyMjQ0NDU1NTY2Njb29vt7e2QkJA/Pz/h4eGzs7NXV1c+
  Pj7y8vLGxsbLy8vW1tbZ2dnf39/i4uLp6enw8PBra2t+fn48PDwRERHc3Nzl5eWampqnp6c6Ojof
  Hx9wcHAhISE5OTk0NDQeHh4mJiZmZmYlJSU4ODhqamo2NjY5mWDZAAAAAXRSTlMAQObYZgAAAAFi
  S0dEAIgFHUgAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfmBAwFGwr8t6soAAAAyUlEQVQY
  02NgAAJ+IBRkEAJCCBCXkJSSlJCWkJGQhQgoKCopKiuqALEqmK+ppa2jq6err2uga8gCEjA1M7ew
  tDK3trG1s3cACyiqObu4ujm6e3h6eUMEnP383QICg4JDQsMgAuoREBAJEYiOiY0LiDdOSExKToEK
  pEFVpEMEsmKyg4JzInPz8gsKHSAqjKEqSiACWRWVVUnJ1TW1dfUNYIEWr+Sk5PTW2raIQq9okEBX
  d0phYWihV0NFQ3cX2DP9LVnRYJDVz8AAANfnO0Ghmw4gAAAAAElFTkSuQmCC" rel="icon" type="image/x-icon" />
</head>
<style>
  html {
    background-color: lightgray;
  }

  body {
    margin: 0;
  }

  canvas {
    position: absolute;
  }

  .bi-plus-lg {
    background-color: rgb(90, 184, 90);
    color: white;
    display: flex;
    line-height: 0;
    width: 42px;
    height: 42px;
    font-size: 26px;
    align-items: center;
    justify-content: center;
    border-radius: 21px;
    box-shadow: 1px 1px 4px gray;
    position: fixed;
    right: 8px;
    top: 8px;
    cursor: pointer;
    user-select: none;
    z-index: 1;
  }

  .bi-plus-lg:hover {
    background-color: rgb(66, 126, 66);
  }

  .bi-save {
    background-color: rgb(66, 195, 255);
    color: white;
    display: flex;
    line-height: 0;
    width: 42px;
    height: 42px;
    font-size: 26px;
    align-items: center;
    justify-content: center;
    border-radius: 21px;
    box-shadow: 1px 1px 4px gray;
    position: fixed;
    right: 8px;
    top: 58px;
    cursor: pointer;
    user-select: none;
    z-index: 1;
  }

  .bi-save:hover {
    background-color: rgb(53, 130, 165);
  }

  .bi-upload {
    background-color: rgb(255, 138, 138);
    color: white;
    display: flex;
    line-height: 0;
    width: 42px;
    height: 42px;
    font-size: 26px;
    align-items: center;
    justify-content: center;
    border-radius: 21px;
    box-shadow: 1px 1px 4px gray;
    position: fixed;
    right: 8px;
    top: 108px;
    cursor: pointer;
    user-select: none;
    z-index: 2;
  }

  .bi-upload:hover {
    background-color: rgb(153, 83, 83);
  }

  .bi-upload.opened {
    box-shadow: none;
  }

  .fileupload {
    display: none;
    z-index: 1;
  }

  .fileupload.opened {
    display: flex;
    position: fixed;
    height: 42px;
    right: 8px;
    top: 108px;
    border-radius: 21px;
    padding-left: 21px;
    padding-right: 21px;
    background-color: rgb(255, 138, 138);
    align-items: center;
    box-shadow: 1px 1px 4px gray;
  }

  .note {
    display: block;
    background-color: white;
    padding: 4px;
    box-shadow: 2px 2px 5px gray;
    border-radius: 4px;
    width: min-content;
    position: absolute;
  }

  .notebar {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .handle {
    text-align: center;
    color: grey;
    cursor: move;
    user-select: none;
    flex-grow: 1;
  }

  .handle:hover {
    color: black;
  }

  .bi-palette,
  .bi-x-circle {
    color: grey;
    font-size: 20px;
    cursor: pointer;
  }

  .bi-palette:hover {
    color: black;
  }

  .bi-x-circle:hover {
    color: red;
  }

  .content {
    margin-top: 2px;
  }

  .content textarea {
    min-width: 69px;
  }
</style>

<body>
  <i class="bi bi-plus-lg"></i>
  <i class="bi bi-save"></i>
  <i class="bi bi-upload"></i>
  <div class="fileupload">
    <input id="fileSelector" type="file" autocomplete="off">
  </div>
</body>
<script>
  document.querySelector(".bi-plus-lg").addEventListener("click", createNote)
  document.querySelector(".bi-save").addEventListener("click", saveJSON)
  document.querySelector(".bi-upload").addEventListener("click", openUpload)
  document.querySelector("#fileSelector").addEventListener("change", uploadJSON)

  const colors = ["ffffff", "bdbdbd", "ff8888", "88a4ff", "ffa4fa", "64ff71", "64faff", "e3ff64", "ffaa64"]

  let notes = []

  // Generate note elements from array

  for (i in notes) {
    createNoteEl(notes[i])
  }

  function createNote() {
    id = genID()
    currentIDArray = []

    // If a duplicate ID exists, retry until unique

    for (i in notes) {
      currentIDArray.push(notes[i].id)
    }

    while ( currentIDArray.includes(id) || id.slice(0,1) == "-" || id.slice(0,1) == "_" ) {
      id = genID()
    }

    let newNote = {
      id: id,
      top: 10,
      left: 10,
      width: 166,
      height: 50,
      text: "",
      color: 0
    }

    notes.push(newNote)

    createNoteEl(newNote)
  }

  function createNoteEl(note) {

    // Create Element

    const noteEl = document.createElement("div")
    const notebar = document.createElement("div")
    const colorBtn = document.createElement("i")
    const handle = document.createElement("span")
    const removeBtn = document.createElement("i")
    const content = document.createElement("div")
    const contentText = document.createElement("textarea")

    noteEl.classList.add("note")
    notebar.classList.add("notebar")
    colorBtn.classList.add("bi")
    colorBtn.classList.add("bi-palette")
    handle.classList.add("handle")
    removeBtn.classList.add("bi")
    removeBtn.classList.add("bi-x-circle")
    content.classList.add("content")

    noteEl.appendChild(notebar)
    notebar.appendChild(colorBtn)
    noteEl.appendChild(content)
    notebar.appendChild(handle)
    handle.innerText = "•••"
    notebar.appendChild(removeBtn)
    content.appendChild(contentText)

    document.querySelector("body").appendChild(noteEl)

    dragElement(noteEl)

    // Reposition element
    noteEl.style.top = note.top + "px"
    noteEl.style.left = note.left + "px"

    // Resize element
    contentText.style.width = note.width + "px"
    contentText.style.height = note.height + "px"

    // Add text
    contentText.value = note.text

    // Assign ID
    noteEl.id = note.id

    // Assign color
    noteEl.style.backgroundColor = "#" + colors[note.color]

    // Button event listeners
    colorBtn.addEventListener("click", selectColor)
    removeBtn.addEventListener("click", remove)
  }

  function selectColor(e) {
    id = e.target.parentNode.parentNode.id

    for (i in notes) {
      if (notes[i].id == id) {
        notes[i].color++
        if (notes[i].color == 9) {
          notes[i].color = 0
        }
        document.querySelector("#" + id).style.backgroundColor = "#" + colors[notes[i].color]
      }
    }
  }

  function remove(e) {
    if (confirm("Delete note?")) {
      id = e.target.parentNode.parentNode.id

      for (i in notes) {
        if (notes[i].id == id) {
          notes.splice(i, 1)
        }
      }
      e.target.parentNode.parentNode.parentNode.removeChild(e.target.parentNode.parentNode)
    }
  }

  function genID() {
    const b64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"
    let id = ""
    for (i = 0; i < 4; i++) {
      const r64 = Math.floor(Math.random() * 64)
      id = id.concat(b64.charAt(r64))
    }
    return id
  }

  function dragElement(elmnt) {
    var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;

    elmnt.querySelector(".handle").onmousedown = dragMouseDown;

    function dragMouseDown(e) {
      e = e || window.event;
      e.preventDefault();
      // get the mouse cursor position at startup:
      pos3 = e.clientX;
      pos4 = e.clientY;
      document.onmouseup = closeDragElement;
      // call a function whenever tgetElementsByClassNamee cursor moves:
      document.onmousemove = elementDrag;
    }

    function elementDrag(e) {
      e = e || window.event;
      e.preventDefault();
      // calculate the new cursor position:
      pos1 = pos3 - e.clientX;
      pos2 = pos4 - e.clientY;
      pos3 = e.clientX;
      pos4 = e.clientY;
      // set the element's new position:
      elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
      elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
    }

    function closeDragElement() {
      // stop moving when mouse button is released:
      document.onmouseup = null;
      document.onmousemove = null;
    }
  }

  function saveJSON() {
    for (i in notes) {
      noteEl = document.querySelector("#" + notes[i].id)
      notes[i].text = noteEl.querySelector("textarea").value
      notes[i].top = noteEl.style.top.slice(0, -2)
      notes[i].left = noteEl.style.left.slice(0, -2)
      notes[i].width = noteEl.querySelector("textarea").style.width.slice(0, -2)
      notes[i].height = noteEl.querySelector("textarea").style.height.slice(0, -2)
    }

    const a = document.createElement("a")
    a.href = URL.createObjectURL(new Blob([JSON.stringify(notes, null, 2)], {
      type: "text/plain"
    }));

    const time = new Date
    const ISOtime = time.toISOString().replaceAll(/:/g, '').slice(0, -5)

    a.setAttribute("download", "yana_notes_" + ISOtime + ".json");
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
  }

  function openUpload() {
    const uploadDiv = document.querySelector(".fileupload")
    const showUploadBtn = document.querySelector(".bi-upload")

    if (uploadDiv.classList.contains("opened")) {
      uploadDiv.classList.remove("opened")
      showUploadBtn.classList.remove("opened")
    } else {
      uploadDiv.classList.add("opened")
      showUploadBtn.classList.add("opened")
    }
  }

  function uploadJSON() {
    // Clear page
    const body = document.querySelector("body")

    while (body.querySelector(".note")) {
      body.removeChild(body.querySelector(".note"))
    }

    // Load file
    const reader = new FileReader
    const [file] = this.files

    reader.addEventListener("load", () => {
      notes = JSON.parse(reader.result)

      for (i in notes) {
        createNoteEl(notes[i])
      }
    }, false)

    if (file) {
      reader.readAsText(file)
    }

    // Cleanup
    this.value = null
    openUpload()
  }
</script>

</html>
